---

## Arquitectura del Sistema

<aside>
ðŸŽ«

1) Sistema de Venta de Tickets
Lanzamiento: Noviembre 2025

</aside>

- Plataforma de inscripciones y venta de entradas
- IntegraciÃ³n con pasarela de pagos OnvoPayments
- GestiÃ³n de diferentes categorÃ­as de tickets
- Landing page informativa

<aside>
ðŸ§¾

2) Sistema de Control de Acceso
OperaciÃ³n: Mayo 2026

</aside>

- Web app para lectura de cÃ³digos QR
- Control de asistencia en tiempo real
- GeneraciÃ³n automÃ¡tica de certificados
- Dashboard administrativo

---

## Fase 1: Sistema de Venta de Tickets

### Tipos de Entradas y CategorÃ­as

- **Tickets Pagados:** Doctores colegiados y profesionales
- **Tickets Gratuitos:** Invitados especiales
- **Conferencistas:** Acceso completo sin costo
- **Patrocinadores:** Entradas corporativas

### Opciones de Compra

- **Por dÃ­as individuales:** Elegir primer dÃ­a, segundo dÃ­a, tercer dÃ­a o todos
- **Entrada completa:** Acceso a todo el evento (29â€“30 mayo)
- **Producto adicional:** Fiesta de clausura opcional con costo adicional

### Estructura de Precios por Fechas

| Fase | Ventana | DescripciÃ³n |
| --- | --- | --- |
| Early Bird | Noviembre 2025 â€“ Fecha X | Precio mÃ¡s econÃ³mico para compras tempranas. Incentivo para registros anticipados. |
| Precio Regular | Fecha X â€“ Fecha Y | Precio estÃ¡ndar del evento. |
| Precio Estudiante | Siempre que aplique | Tarifa especial para estudiantes con validaciÃ³n. |
| Precio Last Minute (opcional) | DÃ­as antes del evento | Precio especial para incentivar compras de Ãºltimo momento. |

### Flujo de Compra del Usuario

1. **Acceso a la plataforma:** Sin necesidad de registro previo
2. **SelecciÃ³n de entradas:**
    - Elige tipo de entrada (por dÃ­as o completa)
    - Selecciona cantidad (puede comprar para mÃºltiples personas)
    - Opcionalmente agrega fiesta de clausura
    - Posibilidad de usar cupones para reducir el precio
3. **Formulario de datos** por cada entrada:
    - Nombre completo
    - Edad
    - GÃ©nero
    - Procedencia geogrÃ¡fica
    - ProfesiÃ³n
    - Sector (pÃºblico/privado)
    - NÃºmero de telÃ©fono
    - Correo electrÃ³nico
4. **Pago:** A travÃ©s de OnvoPayments
5. **ConfirmaciÃ³n:**
    - Correo con detalles de la compra
    - QR Ãºnico por cada entrada
    - Cada entrada asociada a un nombre especÃ­fico

### GestiÃ³n de Pagos y Seguimiento

### OnvoPayments â€” Features

- Notificaciones de procesos de compra iniciados pero no finalizados
- Seguimiento automÃ¡tico de transacciones
- Soporte para mÃºltiples monedas (USD/CRC)
- IntegraciÃ³n con datÃ¡fonos para ventas en sitio

### Sistema de Seguimiento

- Dashboard administrativo para ver ventas en tiempo real
- IdentificaciÃ³n de usuarios que iniciaron compra pero no completaron
- Herramientas de follow-up para ventas pendientes
- Reportes de transacciones y estados de pago

---

## Fase 2: Landing Page y Contenido

### Secciones de la Landing Page

1. **InformaciÃ³n del evento:** Fechas, ubicaciÃ³n, descripciÃ³n general
2. **Agenda:** Programa detallado, horarios de charlas
3. **Conferencistas:** Perfiles y biografÃ­as de speakers
4. **Registro:** Acceso directo al sistema de compra
5. **Patrocinadores:** Logos y informaciÃ³n de sponsors
6. **Contacto:** InformaciÃ³n de contacto y ubicaciÃ³n

### CaracterÃ­sticas TÃ©cnicas de la Landing

- **DiseÃ±o responsive:** Compatible con mÃ³vil, tablet y desktop
- **OptimizaciÃ³n SEO:** BÃ¡sica para mejorar visibilidad
- **IntegraciÃ³n nativa:** Con sistema de acreditaciÃ³n
- **Tracking:** Meta Pixel y Google Analytics para campaÃ±as publicitarias

---

## Fase 3: Sistema de Control de Acceso (Mayo 2026)

### Web App para Lectura QR â€” Funcionamiento

- **PWA (Progressive Web App):** No requiere instalaciÃ³n
- **Acceso por roles:** Usuarios administrativos con credenciales
- **Escaneo vÃ­a cÃ¡mara:** Utiliza WebRTC para acceso a cÃ¡mara del dispositivo
- **ValidaciÃ³n en tiempo real:** Marca entrada y salida por dÃ­a

### Proceso de ValidaciÃ³n

1. **En la entrada:** Escaneo del QR para marcar asistencia
2. **Control por charlas:** Seguimiento de asistencia (hora entrada, hora salida)
3. **Salida:** Registro de salida del evento y de ciertas charlas para la acreditaciÃ³n

### Manejo de Usuarios sin QR

### Problema Identificado

- Usuarios de tercera edad o con poca familiaridad tecnolÃ³gica
- Personas que pagaron pero no tienen el QR accesible

### SoluciÃ³n

- **ImpresiÃ³n en sitio:** Sistemacon la posibilidad de que los administradores puedan descargar el QRs de los clientes
- **Stickers con QR:** ImpresiÃ³n de cÃ³digos QR en stickers adhesivos
- **AplicaciÃ³n en gafetes:** Los stickers se pegan en los gafetes entregados en el evento

### Venta de Entradas en Sitio â€” Funcionalidad

- **Sistema de venta in situ:** Para personas que llegan sin entrada
- **IntegraciÃ³n con datÃ¡fonos:** Pago inmediato con tarjeta
- **GeneraciÃ³n instantÃ¡nea de QR:** Se crea y entrega al momento
- **Formulario rÃ¡pido:** Captura de datos esenciales en el lugar

---

## Fase 4: Sistema de Certificados

### Criterios para CertificaciÃ³n

1. **Compra de entrada:** ConfirmaciÃ³n de pago
2. **Asistencia fÃ­sica:** ValidaciÃ³n mediante escaneo de QR
3. **Cumplimiento de requisitos:** Asistencia a charlas, asistencia por dÃ­a.

### Proceso Automatizado

- **Filtrado automÃ¡tico:** Sistema identifica usuarios que cumplen requisitos
- **GeneraciÃ³n de certificados:** AutomÃ¡tica al finalizar el evento
- **EnvÃ­o por correo:** Certificado de aprovechamiento o participaciÃ³n
- **Timing:** Solo se envÃ­an despuÃ©s de concluir todo el evento

---

## Fase 5: Dashboard Administrativo

### Panel de Control Principal â€” MÃ©tricas en Tiempo Real

- Ventas totales por dÃ­a
- Registros confirmados vs pendientes
- Aforo (asistentes de cada evento)
- Ingresos generados

### GestiÃ³n de Usuarios

- **Lista completa de registrados:** Con todos los datos del formulario
- **Filtros avanzados:** Por edad, gÃ©nero, procedencia, profesiÃ³n, sector
- **Estados de pago:** Pagado, pendiente, reembolsado
- **Seguimiento de asistencia:** QuiÃ©n ha ingresado al evento

### Reportes DemogrÃ¡ficos

- DistribuciÃ³n por edad y gÃ©nero
- Procedencia geogrÃ¡fica
- AnÃ¡lisis profesional (pÃºblico vs privado)
- Patrones de compra por fechas

### Herramientas de Seguimiento

- **Follow-up de ventas:** Usuarios que iniciaron compra sin completar
- **ComunicaciÃ³n:** Herramientas para contactar usuarios
- **ExportaciÃ³n:** Todos los datos exportables a Excel
- **Analytics:** IntegraciÃ³n con Google Analytics para tracking de campaÃ±as
- Meta Pixel

---

## Especificaciones TÃ©cnicas

### Hardware Incluido

- **4â€“6 Impresoras tÃ©rmicas:** Compatibles con protocolo ESC/POS (TSC/G&G)
- **IntegraciÃ³n con datÃ¡fonos:** Para ventas en sitio

### Seguridad

- AutenticaciÃ³n de usuarios administrativos
- EncriptaciÃ³n de datos sensibles
- Backup automÃ¡tico diario
- Monitoreo 24/7
- ProtecciÃ³n contra ataques DDoS

---

<aside>
ðŸ’¡

## Stack TecnolÃ³gico Completo

</aside>

## Frontend Core

**Framework Principal**

- **Next.js 14 con App Router** - Framework React con renderizado del servidor y rutas basadas en carpetas **âœ“**
- **TypeScript** - AÃ±ade tipos estÃ¡ticos para prevenir errores **âœ“**

**UI y Estilos**

- **Tailwind CSS** - Estilos con clases utilitarias directamente en el HTML  **âœ“**
- **shadcn/ui** - Componentes pre-diseÃ±ados copiables y personalizables
- **lucide-react** - LibrerÃ­a de Ã­conos SVG moderna y ligera **âœ“**
- **react-icons** - ColecciÃ³n de Ã­conos de mÃºltiples librerÃ­as populares **âœ“**
- **next/image** - Optimiza imÃ¡genes automÃ¡ticamente con lazy loading **âœ“**
- **framer-motion** - Crea animaciones fluidas y transiciones avanzadas **âœ“**
- **AOS** - Animaciones al hacer scroll en la pÃ¡gina **âœ“**

**Formularios y ValidaciÃ³n**

- **react-hook-form** - Maneja formularios con mÃ­nimos re-renders **âœ“**
- **zod** - Valida datos con schemas tipados de TypeScript **âœ“**

## Backend y Database

**Backend as a Service**

- **Supabase** - Backend completo con base de datos, autenticaciÃ³n y APIs en tiempo real
- **PostgreSQL 15** - Base de datos relacional robusta y escalable
- **Supabase Auth** - Sistema de autenticaciÃ³n con mÃºltiples proveedores
- **Supabase Storage** - Almacenamiento de archivos como certificados y PDFs
- **Supabase Realtime** - Actualizaciones en vivo para el dashboard

**Utilidades**

- **date-fns** - Manipula fechas para early bird y precios regulares **âœ“**

**ORM**

- **Drizzle ORM** - Consultas SQL tipadas y seguras con TypeScript **âœ“**
- **drizzle-kit** - Herramientas CLI para migraciones de base de datos **âœ“**

**Estado y CachÃ©**

- **TanStack Query** - Cachea y sincroniza datos del servidor automÃ¡ticamente
- **Zustand** - Estado global ligero solo si lo necesitas del lado del cliente **âœ“**

**PWA para Lectura de QR**

- **Next-pwa** al stack para configuraciÃ³n PWA

## QR y Asistencia

**QR Codes**

- **qrcode** - Genera cÃ³digos QR para tickets de eventos **âœ“**
- **qr-scanner** - Lee cÃ³digos QR desde la cÃ¡mara en PWA **âœ“**

## Pagos y Transacciones

**OnvoPayments** - Procesa pagos en lÃ­nea de forma segura **âœ“**Â 

## Comunicaciones

**Emails**

- **resend** - EnvÃ­a emails transaccionales de forma confiable **âœ“**
- **@react-email/components** - Crea plantillas de email con componentes React  **âœ“**

## Documentos y Certificados

**PDFs**

- **@react-pdf/renderer** - Genera PDFs desde componentes React **âœ“**
- **Server Actions** - Genera PDFs del lado del servidor de forma segura
- **Supabase Storage** - Almacena certificados y documentos generados

## Monitoreo y Analytics

**Analytics**

- **Vercel Analytics** - MÃ©tricas de rendimiento incluidas con el hosting
- **Google Analytics 4** - Rastrea comportamiento de usuarios y conversiones **âœ“**
- **Meta Pixel** - Rastrea conversiones para ads de Facebook/Instagram

## Testing

**Unit y Integration**

- **Vitest** - Framework rÃ¡pido para pruebas unitarias y de integraciÃ³n

## Seguridad

**AutenticaciÃ³n**

- **Supabase Auth** - Maneja login, registro y sesiones de usuarios
- **middleware de Next.js** - Protege rutas privadas del lado del servidor

**Rate Limiting**

- **@upstash/ratelimit con Vercel KV** - Limita peticiones para prevenir spam en compras y escaneos
- **@upstash/ratelimit** es excelente pero requiere Vercel KV (de pago)
- Alternativa gratuita: implementar rate limiting en Supabase con RLS policies

## Extras

**Tablas Avanzadas**

- **@tanstack/react-table** - Tablas con sorting, filtros y paginaciÃ³n para el dashboard **âœ“**

**GrÃ¡ficas**

- **recharts** - GrÃ¡ficos interactivos de ventas y asistencia  **âœ“**

**Excel Export**

- **xlsx** - Exporta datos del dashboard a archivos Excel  **âœ“**

event-management-system/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                                    # Next.js 14 App Router
â”‚   â”‚   â”œâ”€â”€ (public)/                          # Rutas pÃºblicas (sin layout admin)
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                       # Landing page principal
â”‚   â”‚   â”‚   â”œâ”€â”€ evento/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # InformaciÃ³n del evento
â”‚   â”‚   â”‚   â”œâ”€â”€ agenda/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # Programa y horarios
â”‚   â”‚   â”‚   â”œâ”€â”€ conferencistas/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # Speakers
â”‚   â”‚   â”‚   â”œâ”€â”€ patrocinadores/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # Sponsors
â”‚   â”‚   â”‚   â”œâ”€â”€ tickets/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                   # Sistema de venta
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ seleccion/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # SelecciÃ³n de entradas
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ formulario/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # Datos de compradores
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ pago/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # IntegraciÃ³n OnvoPayments
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ confirmacion/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx               # ConfirmaciÃ³n y QR
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx                     # Layout pÃºblico
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (admin)/                           # Rutas administrativas
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                   # Dashboard principal
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ventas/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # Reportes de ventas
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ asistentes/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # GestiÃ³n de usuarios
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ asistencia/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # Control de asistencia
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ certificados/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # GeneraciÃ³n certificados
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ reportes/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx               # AnÃ¡lisis demogrÃ¡fico
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx                     # Layout admin
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ (qr-scanner)/                      # PWA para lectura QR
â”‚   â”‚   â”‚   â”œâ”€â”€ scanner/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                   # EscÃ¡ner QR
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validacion/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx               # Resultado validaciÃ³n
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ historial/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ page.tsx               # Historial de escaneos
â”‚   â”‚   â”‚   â””â”€â”€ layout.tsx                     # Layout PWA
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ api/                               # API Routes
â”‚   â”‚   â”‚   â”œâ”€â”€ tickets/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts               # Crear ticket
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ validate/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts               # Validar cupÃ³n
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts               # Obtener ticket
â”‚   â”‚   â”‚   â”œâ”€â”€ payments/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ webhook/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts               # Webhook OnvoPayments
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ status/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts               # Estado de pago
â”‚   â”‚   â”‚   â”œâ”€â”€ qr/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ scan/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts               # Registrar escaneo
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ generate/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts               # Generar QR
â”‚   â”‚   â”‚   â”œâ”€â”€ certificates/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ generate/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts               # Generar certificado
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ send/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ route.ts               # Enviar por email
â”‚   â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚   â”‚       â”œâ”€â”€ sales/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ route.ts               # MÃ©tricas ventas
â”‚   â”‚   â”‚       â””â”€â”€ attendance/
â”‚   â”‚   â”‚           â””â”€â”€ route.ts               # MÃ©tricas asistencia
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                              # AutenticaciÃ³n
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                   # Login admin
â”‚   â”‚   â”‚   â””â”€â”€ callback/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts                   # Callback Supabase
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout.tsx                         # Root layout
â”‚   â”‚   â”œâ”€â”€ globals.css                        # Estilos globales
â”‚   â”‚   â””â”€â”€ manifest.json                      # PWA manifest
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                            # Componentes reutilizables
â”‚   â”‚   â”œâ”€â”€ ui/                                # shadcn/ui components
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ form.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ select.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx
â”‚   â”‚   â”‚   â””â”€â”€ toast.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ landing/                           # Componentes landing
â”‚   â”‚   â”‚   â”œâ”€â”€ Hero.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EventInfo.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Speakers.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Agenda.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Sponsors.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Footer.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ tickets/                           # Componentes venta
â”‚   â”‚   â”‚   â”œâ”€â”€ TicketSelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PriceCalculator.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CouponInput.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AttendeeForm.tsx
â”‚   â”‚   â”‚   â””â”€â”€ OrderSummary.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ scanner/                           # Componentes escÃ¡ner
â”‚   â”‚   â”‚   â”œâ”€â”€ QRScanner.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ScanResult.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AttendanceLog.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ dashboard/                         # Componentes dashboard
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SalesChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AttendeeTable.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DemographicChart.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ExportButton.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ shared/                            # Componentes compartidos
â”‚   â”‚       â”œâ”€â”€ Navbar.tsx
â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚       â”œâ”€â”€ Loading.tsx
â”‚   â”‚       â””â”€â”€ ErrorBoundary.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                                   # Utilidades y configuraciÃ³n
â”‚   â”‚   â”œâ”€â”€ supabase/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts                      # Cliente Supabase
â”‚   â”‚   â”‚   â”œâ”€â”€ server.ts                      # Server client
â”‚   â”‚   â”‚   â””â”€â”€ middleware.ts                  # Auth middleware
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ db/                                # Database
â”‚   â”‚   â”‚   â”œâ”€â”€ schema.ts                      # Drizzle schema
â”‚   â”‚   â”‚   â”œâ”€â”€ migrations/                    # DB migrations
â”‚   â”‚   â”‚   â””â”€â”€ queries.ts                     # Queries reutilizables
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ payments/
â”‚   â”‚   â”‚   â”œâ”€â”€ onvo.ts                        # OnvoPayments SDK
â”‚   â”‚   â”‚   â””â”€â”€ webhook-handler.ts             # Procesar webhooks
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ qr/
â”‚   â”‚   â”‚   â”œâ”€â”€ generator.ts                   # Generar QR codes
â”‚   â”‚   â”‚   â”œâ”€â”€ scanner.ts                     # LÃ³gica escaneo
â”‚   â”‚   â”‚   â””â”€â”€ validator.ts                   # Validar QR
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ certificates/
â”‚   â”‚   â”‚   â”œâ”€â”€ generator.ts                   # Generar PDFs
â”‚   â”‚   â”‚   â”œâ”€â”€ templates/                     # Plantillas PDF
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ attendance.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ participation.tsx
â”‚   â”‚   â”‚   â””â”€â”€ criteria.ts                    # Criterios certificaciÃ³n
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ email/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts                      # Resend client
â”‚   â”‚   â”‚   â””â”€â”€ templates/                     # Plantillas email
â”‚   â”‚   â”‚       â”œâ”€â”€ ticket-confirmation.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ payment-reminder.tsx
â”‚   â”‚   â”‚       â””â”€â”€ certificate.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”‚   â”œâ”€â”€ google.ts                      # Google Analytics
â”‚   â”‚   â”‚   â”œâ”€â”€ meta-pixel.ts                  # Meta Pixel
â”‚   â”‚   â”‚   â””â”€â”€ vercel.ts                      # Vercel Analytics
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ pricing.ts                     # CÃ¡lculo precios
â”‚   â”‚       â”œâ”€â”€ validation.ts                  # Validaciones
â”‚   â”‚       â”œâ”€â”€ date.ts                        # Utilidades fechas
â”‚   â”‚       â”œâ”€â”€ export.ts                      # Exportar Excel
â”‚   â”‚       â””â”€â”€ cn.ts                          # className utils
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                                 # Custom React hooks
â”‚   â”‚   â”œâ”€â”€ useTickets.ts
â”‚   â”‚   â”œâ”€â”€ usePayment.ts
â”‚   â”‚   â”œâ”€â”€ useQRScanner.ts
â”‚   â”‚   â”œâ”€â”€ useAttendance.ts
â”‚   â”‚   â”œâ”€â”€ useDashboard.ts
â”‚   â”‚   â””â”€â”€ useAuth.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ store/                                 # Estado global (Zustand)
â”‚   â”‚   â”œâ”€â”€ cart.ts                            # Carrito de compra
â”‚   â”‚   â”œâ”€â”€ scanner.ts                         # Estado escÃ¡ner
â”‚   â”‚   â””â”€â”€ dashboard.ts                       # Filtros dashboard
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                                 # TypeScript types
â”‚   â”‚   â”œâ”€â”€ ticket.ts
â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”œâ”€â”€ payment.ts
â”‚   â”‚   â”œâ”€â”€ attendance.ts
â”‚   â”‚   â”œâ”€â”€ certificate.ts
â”‚   â”‚   â””â”€â”€ analytics.ts
â”‚   â”‚
â”‚   â””â”€â”€ config/                                # ConfiguraciÃ³n
â”‚       â”œâ”€â”€ site.ts                            # Config del sitio
â”‚       â”œâ”€â”€ tickets.ts                         # CategorÃ­as tickets
â”‚       â”œâ”€â”€ pricing.ts                         # Estructura precios
â”‚       â””â”€â”€ event.ts                           # Info del evento
â”‚
â”œâ”€â”€ public/                                    # Archivos estÃ¡ticos
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ logo.svg
â”‚   â”‚   â”œâ”€â”€ speakers/
â”‚   â”‚   â””â”€â”€ sponsors/
â”‚   â””â”€â”€ fonts/
â”‚
â”œâ”€â”€ tests/                                     # Tests
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ pricing.test.ts
â”‚   â”‚   â”œâ”€â”€ validation.test.ts
â”‚   â”‚   â””â”€â”€ qr.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â”œâ”€â”€ tickets.test.ts
â”‚       â”œâ”€â”€ payments.test.ts
â”‚       â””â”€â”€ scanner.test.ts
â”‚
â”œâ”€â”€ .env.local                                 # Variables de entorno
â”œâ”€â”€ next.config.js                             # ConfiguraciÃ³n Next.js
â”œâ”€â”€ tailwind.config.js                         # ConfiguraciÃ³n Tailwind
â”œâ”€â”€ tsconfig.json                              # ConfiguraciÃ³n TypeScript
â”œâ”€â”€ drizzle.config.ts                          # ConfiguraciÃ³n Drizzle
â”œâ”€â”€ package.json                               # Dependencias
â””â”€â”€ [README.md](http://readme.md/)                                  # DocumentaciÃ³n

## **Usuarios / Asistentes**

---

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_usuario | UUID PK | Identificador Ãºnico del usuario |
| nombre | VARCHAR(200) | Nombre |
| apellido | VARCHAR(200) | Apellido |
| edad | INTEGER | Edad |
| genero | VARCHAR(50) | GÃ©nero |
| procedencia | VARCHAR(200) | Procedencia geogrÃ¡fica |
| profesion | VARCHAR(200) | ProfesiÃ³n |
| sector | ENUM('PÃºblico', 'Privado') | Sector laboral |
| telefono | VARCHAR(20) | NÃºmero de telÃ©fono |
| correo | VARCHAR(200) UNIQUE | Correo electrÃ³nico |
| created_at | TIMESTAMP | Fecha de creaciÃ³n del registro |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Tickets**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_ticket | UUID PK | Identificador Ãºnico del ticket |
| id_usuario | UUID FK â†’ Usuarios | Persona asociada al ticket |
| id_compra | UUID FK â†’ Compras | Compra a la que pertenece |
| tipo_ticket | ENUM('Pagado', 'Gratuito', 'Conferencista', 'Patrocinador') | CategorÃ­a del ticket |
| modalidad | ENUM('Dia1', 'Dia2', 'Completo') | DÃ­as incluidos |
| incluye_fiesta | BOOLEAN | Indica si incluye fiesta de clausura |
| precio_pagado | DECIMAL(10,2) | Precio final pagado (despuÃ©s de descuentos) |
| precio_original | DECIMAL(10,2) | Precio antes de descuentos |
| id_fase_precio | UUID FK â†’ Fases_Precio | Fase de precio aplicada |
| estado_ticket | ENUM('Activo', 'Usado', 'Cancelado', 'Reembolsado') | Estado del ticket |
| qr_code | TEXT UNIQUE | CÃ³digo QR Ãºnico generado |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Compras**

*Nueva tabla para agrupar tickets de una misma transacciÃ³n*

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_compra | UUID PK | Identificador Ãºnico de la compra |
| correo_comprador | VARCHAR(200) | Email del comprador (puede diferir de los asistentes) |
| cantidad_tickets | INTEGER | NÃºmero de tickets en esta compra |
| subtotal | DECIMAL(10,2) | Suma de precios originales |
| descuento_total | DECIMAL(10,2) | Total descontado por cupones |
| total | DECIMAL(10,2) | Monto final a pagar |
| id_cupon | UUID FK â†’ Cupones NULL | CupÃ³n aplicado (si existe) |
| estado_compra | ENUM('Iniciado', 'Completado', 'Abandonado', 'Cancelado') | Estado del proceso |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Cupones**

*Nueva tabla para gestionar descuentos*

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_cupon | UUID PK | Identificador Ãºnico del cupÃ³n |
| codigo | VARCHAR(50) UNIQUE | CÃ³digo del cupÃ³n (ej: EARLYBIRD2025) |
| tipo_descuento | ENUM('Porcentaje', 'MontoFijo') | Tipo de descuento |
| valor_descuento | DECIMAL(10,2) | Valor del descuento (% o monto) |
| fecha_inicio | TIMESTAMP | Desde cuÃ¡ndo es vÃ¡lido |
| fecha_expiracion | TIMESTAMP | Hasta cuÃ¡ndo es vÃ¡lido |
| usos_maximos | INTEGER NULL | LÃ­mite de usos (NULL = ilimitado) |
| usos_actuales | INTEGER DEFAULT 0 | CuÃ¡ntas veces se ha usado |
| activo | BOOLEAN DEFAULT TRUE | Si estÃ¡ activo o no |
| descripcion | TEXT | DescripciÃ³n del cupÃ³n |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Pagos**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_pago | UUID PK | Identificador Ãºnico del pago |
| id_compra | UUID FK â†’ Compras | Compra relacionada |
| metodo_pago | ENUM('OnvoPayments', 'Datafono') | MÃ©todo usado |
| moneda | ENUM('USD', 'CRC') | Moneda usada |
| monto | DECIMAL(10,2) | Monto cobrado |
| estado_pago | ENUM('Pendiente', 'Pagado', 'Fallido', 'Reembolsado') | Estado de la transacciÃ³n |
| fecha_pago | TIMESTAMP NULL | Momento del pago exitoso |
| referencia_transaccion | VARCHAR(200) | ID de OnvoPayments |
| detalles_adicionales | JSONB NULL | Info extra del procesador de pagos |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Fases_Precio**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_fase | UUID PK | Identificador de la fase |
| nombre_fase | VARCHAR(100) | Early Bird, Regular, Estudiante, Last Minute |
| fecha_inicio | TIMESTAMP | Inicio de la fase |
| fecha_fin | TIMESTAMP | Fin de la fase |
| precio_dia_individual | DECIMAL(10,2) | Precio por un dÃ­a |
| precio_completo | DECIMAL(10,2) | Precio entrada completa |
| precio_fiesta | DECIMAL(10,2) | Costo adicional fiesta |
| descripcion | TEXT | Condiciones de la fase |
| activo | BOOLEAN DEFAULT TRUE | Si estÃ¡ activa |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Asistencia**

*RediseÃ±ada para tracking detallado*

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_asistencia | UUID PK | Identificador Ãºnico |
| id_ticket | UUID FK â†’ Tickets | Ticket escaneado |
| tipo_registro | ENUM('Entrada_Evento', 'Salida_Evento') | Tipo de escaneo |
| fecha_hora | TIMESTAMP | Momento exacto del escaneo |
| escaneado_por | UUID FK â†’ Administradores | Admin que hizo el escaneo |
| ubicacion | VARCHAR(200) NULL | Punto de escaneo (ej: "Entrada Principal", "SalÃ³n A") |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |

---

## **Asistencia_Resumen**

*Nueva tabla para facilitar queries de certificaciÃ³n*

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_resumen | UUID PK | Identificador Ãºnico |
| id_ticket | UUID FK â†’ Tickets UNIQUE | Ticket asociado |
| dia_1_entrada | TIMESTAMP NULL | Primera entrada dÃ­a 1 |
| dia_1_salida | TIMESTAMP NULL | Ãšltima salida dÃ­a 1 |
| dia_2_entrada | TIMESTAMP NULL | Primera entrada dÃ­a 2 |
| dia_2_salida | TIMESTAMP NULL | Ãšltima salida dÃ­a 2 |
| cumple_certificacion | BOOLEAN | Si cumple requisitos para certificado |
| updated_at | TIMESTAMP | Ãšltima actualizaciÃ³n |

---

## **Charlas / Agenda**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_charla | UUID PK | Identificador de la charla |
| titulo | VARCHAR(300) | TÃ­tulo de la charla |
| descripcion | TEXT | Breve resumen |
| fecha | DATE | DÃ­a de la charla |
| hora_inicio | TIME | Inicio de la charla |
| hora_fin | TIME | Fin de la charla |
| duracion_minutos | INTEGER | DuraciÃ³n en minutos |
| id_conferencista | UUID FK â†’ Conferencistas | Ponente responsable |
| ubicacion | VARCHAR(200) | SalÃ³n o espacio |
| cupo_maximo | INTEGER NULL | Capacidad (si aplica) |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Conferencistas**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_conferencista | UUID PK | Identificador Ãºnico |
| nombre | VARCHAR(200) | Nombre completo |
| biografia | TEXT | Breve bio |
| foto_url | TEXT | URL de foto del conferencista |
| correo | VARCHAR(200) NULL | Contacto (opcional) |
| organizacion | VARCHAR(200) NULL | Empresa/instituciÃ³n |
| redes_sociales | JSONB NULL | Links a redes sociales |
| orden_display | INTEGER | Orden de apariciÃ³n en la web |
| activo | BOOLEAN DEFAULT TRUE | Si se muestra pÃºblicamente |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Patrocinadores**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_patrocinador | UUID PK | Identificador Ãºnico |
| nombre | VARCHAR(200) | Nombre de la empresa |
| logo_url | TEXT | URL del logo |
| orden_display | INTEGER | Orden de apariciÃ³n |
| url_sitio_web | TEXT NULL | Sitio web del patrocinador |
| descripcion | TEXT NULL | DescripciÃ³n breve |
| activo | BOOLEAN DEFAULT TRUE | Si se muestra pÃºblicamente |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

## **Certificados**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_certificado | UUID PK | Identificador Ãºnico |
| id_ticket | UUID FK â†’ Tickets UNIQUE | Ticket asociado |
| id_usuario | UUID FK â†’ Usuarios | Usuario que recibe el certificado |
| tipo_certificado | ENUM('Participacion', 'Aprovechamiento') | Tipo generado |
| fecha_emision | TIMESTAMP | Fecha de generaciÃ³n |
| archivo_url | TEXT | Enlace al PDF en Supabase Storage |
| estado | ENUM('Generado', 'Enviado', 'Error') | Estado del certificado |
| fecha_envio | TIMESTAMP NULL | CuÃ¡ndo se enviÃ³ por email |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| codigo_verificacion | VARCHAR(50) |  |

---

## **Administradores**

| Campo | Tipo | DescripciÃ³n |
| --- | --- | --- |
| id_admin | UUID PK | Identificador Ãºnico |
| nombre | VARCHAR(200) | Nombre completo |
| correo | VARCHAR(200) UNIQUE | Correo |
| rol | ENUM('SuperAdmin', 'Admin', 'Staff', 'Scanner') | Nivel de acceso |
| password_hash | TEXT | ContraseÃ±a encriptada (Supabase Auth) |
| activo | BOOLEAN DEFAULT TRUE | Si puede acceder |
| ultimo_acceso | TIMESTAMP NULL | Ãšltima vez que ingresÃ³ |
| created_at | TIMESTAMP | Timestamp de creaciÃ³n |
| updated_at | TIMESTAMP | Timestamp de actualizaciÃ³n |

---

# Plan de Trabajo - 3 Semanas (MVP Funcional)

**Objetivo:** Landing page funcional + Sistema de compra de tickets con pago

---

## **Semana 1-2: Setup + Landing Page + Base de Datos**

### **ConfiguraciÃ³n del proyecto**

- [ ]  Crear proyecto Next.js 14 con TypeScript
- [ ]  Configurar Tailwind CSS + shadcn/ui
- [ ]  Setup Supabase (proyecto, base de datos)
- [ ]  Configurar Drizzle ORM + migraciones
- [ ]  Crear schema de base de datos (todas las tablas)
- [ ]  Variables de entorno (.env.local)
- [ ]  Git repo + primer commit

### **Sistema de precios + Cupones**

- [ ]  Crear tabla Fases_Precio con datos iniciales
- [ ]  LÃ³gica para calcular precio segÃºn fecha actual
- [ ]  Sistema de cupones (validaciÃ³n backend)
- [ ]  Componente PriceCalculator

### **Flujo de selecciÃ³n**

- [ ]  `/tickets/seleccion` - Selector de tickets
    - [ ]  Elegir modalidad (DÃ­a 1, DÃ­a 2, Completo)
    - [ ]  Cantidad de tickets
    - [ ]  Checkbox fiesta de clausura
    - [ ]  Input para cupÃ³n + validaciÃ³n
- [ ]  Zustand store para carrito de compra
- [ ]  Resumen de orden (OrderSummary component)

---

## **Semana 2: Sistema de Compra de Tickets**

### **Formulario de datos**

- [ ]  `/tickets/formulario` - Formulario por cada ticket
- [ ]  React Hook Form + Zod validation
- [ ]  Campos: nombre, apellido, edad, gÃ©nero, procedencia, profesiÃ³n, sector, telÃ©fono, correo
- [ ]  Guardar datos en Zustand
- [ ]  BotÃ³n "Continuar a pago"

### **IntegraciÃ³n de pagos**

- [ ]  Configurar OnvoPayments (credenciales sandbox)
- [ ]  `/tickets/pago` - PÃ¡gina de pago
- [ ]  API Route: `/api/payments/create`
    - [ ]  Crear registros: Compra, Tickets, Usuarios, Pago
    - [ ]  Iniciar transacciÃ³n OnvoPayments
- [ ]  API Route: `/api/payments/webhook`
    - [ ]  Procesar confirmaciÃ³n de pago
    - [ ]  Actualizar estado_compra y estado_pago
    - [ ]  **Generar QR codes** para cada ticket
- [ ]  `/tickets/confirmacion` - PÃ¡gina de Ã©xito
    - [ ]  Mostrar resumen de compra
    - [ ]  **Mostrar QR codes** (uno por ticket)

### **Landing Page Completa**

- [ ]  Layout principal (Navbar, Footer)
- [ ]  Hero section con CTA a compra
- [ ]  SecciÃ³n: InformaciÃ³n del evento
- [ ]  SecciÃ³n: Agenda (lista de charlas desde DB)
- [ ]  SecciÃ³n: Conferencistas (cards con fotos)
- [ ]  SecciÃ³n: Patrocinadores (logos por nivel)
- [ ]  SecciÃ³n: Contacto
- [ ]  Responsive design (mobile/tablet/desktop)
- [ ]  Integrar Google Analytics + Meta Pixel

---

## **Semana 3: Emails + Dashboard BÃ¡sico + Testing**

### **Sistema de emails**

- [ ]  Configurar Resend (API key)
- [ ]  Plantilla email: ConfirmaciÃ³n de compra con QRs
- [ ]  Enviar email automÃ¡tico despuÃ©s del pago exitoso
- [ ]  Plantilla email: Recordatorio de pago (abandonados)

### **Dashboard administrativo bÃ¡sico**

- [ ]  Login admin (Supabase Auth)
- [ ]  `/dashboard` - Vista principal
    - [ ]  MÃ©tricas: Total ventas, ingresos, tickets vendidos
    - [ ]  GrÃ¡fica de ventas por dÃ­a (recharts)
- [ ]  `/dashboard/asistentes` - Lista de compradores
    - [ ]  Tabla con filtros bÃ¡sicos
    - [ ]  Exportar a Excel

### **Testing y ajustes**

- [ ]  Probar flujo completo de compra
- [ ]  Revisar responsive en mÃ³viles
- [ ]  Verificar emails funcionan
- [ ]  Revisar cÃ¡lculo de precios y cupones
- [ ]  Probar pagos sandbox

### **Deploy y buffer**

- [ ]  Deploy en Vercel
- [ ]  Configurar dominio (si aplica)
- [ ]  Testing en producciÃ³n
- [ ]  DocumentaciÃ³n bÃ¡sica para el equipo